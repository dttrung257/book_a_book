"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[193],{3193:function(t,e,n){n.r(e),n.d(e,{default:function(){return M}});var c=n(1413),i=n(4165),a=n(5861),r=n(885),o=n(2791),s=n(8617),l=n(5985),d=n(7205),u=n(9649),h=n(1917),f="Cart_container__7-s4T",x="Cart_content__yn3CS",m="Cart_left__zx1u+",v="Cart_right__4nX2H",j="Cart_trashIcon__L8EN4",k="Cart_sticky__fuHDf",p="Cart_box__BaPuk",_="Cart_row__HmsGN",C="Cart_checkoutBtn__gt4OL",y="Cart_cartItem__fXLJK",g="Cart_productInfo__Rwo1A",b="Cart_quantity__2HfTX",N="Cart_selectAmount__VAT9C",w="Cart_name__ntMe7",Z="Cart_author__0OKcA",Q="Cart_category__N4rlC",q="Cart_btnGroup__fqrCl",A=n(1087),I=n(71),S=n(8474),B=n(8452),L=n(4410),P=n(184),T=function(t){var e=t.book,n=t.quantity,i=t.checked,a=t.booksInfo,u=t.setBooksInfo,f=(0,h.T)(),x=(0,o.useState)(!1),m=(0,r.Z)(x,2),v=m[0],k=m[1],C=function(t,n){u(a.map((function(t){return t.book.id===e.id?(0,c.Z)((0,c.Z)({},t),{},{quantity:n}):t}))),f(B.U.changeQuantity({id:t,quantity:n}))};return(0,P.jsxs)("div",{className:"".concat(y," ").concat(_," ").concat(p," mt-1 py-3 px-0"),children:[(0,P.jsx)("div",{children:(0,P.jsx)("input",{className:"form-check-input",type:"checkbox",checked:i,name:"",id:"",onChange:function(){u(a.map((function(t){return t.book.id===e.id?(0,c.Z)((0,c.Z)({},t),{},{checked:!i}):t})))}})}),(0,P.jsxs)("div",{className:"".concat(g),children:[(0,P.jsx)("div",{children:(0,P.jsx)(A.rU,{to:"/product/".concat(e.id,"/").concat(e.name.split(" ").join("-").toLowerCase()),children:(0,P.jsx)("img",{src:e.image,alt:"img"})})}),(0,P.jsxs)("div",{className:"ps-2",children:[(0,P.jsx)(A.rU,{to:"/product/".concat(e.id,"/").concat(e.name.split(" ").join("-").toLowerCase()),className:"".concat(w),children:(0,P.jsx)("h5",{children:(0,L.Q)(e.name,28)})}),(0,P.jsxs)("div",{className:"".concat(Z," text-muted"),children:["Author: ",(0,L.Q)(e.author,28)]}),(0,P.jsxs)("div",{className:"".concat(Q," text-muted"),children:["Category:"," ",(0,L.Q)(e.category.charAt(0).toUpperCase()+e.category.slice(1).toLowerCase(),28)]})]})]}),(0,P.jsxs)("div",{children:[e.sellingPrice,"$"]}),(0,P.jsx)("div",{className:b,children:(0,P.jsxs)("div",{style:{display:"flex"},children:[(0,P.jsx)("div",{className:"".concat(N),onClick:function(){return function(){var t=n-1>=0?n-1:n;if(0===t)return k(!0);C(e.id,t)}()},children:(0,P.jsx)(I._kz,{})}),(0,P.jsx)("input",{type:"number",value:n,onChange:function(t){if(""!==t.target.value){var n=t.target.valueAsNumber;n>e.availableQuantity?(l.Am.warning('"'.concat(e.name,'" now has only ').concat(e.availableQuantity," left in stock")),n=e.availableQuantity):n<1&&(n=1),C(e.id,n)}else C(e.id,1)}}),(0,P.jsx)("div",{className:"".concat(N),onClick:function(){return function(){n+1>e.availableQuantity&&l.Am.warning('"'.concat(e.name,'" now has only ').concat(e.availableQuantity," left in stock"));var t=n+1<=e.availableQuantity?n+1:n;C(e.id,t)}()},children:(0,P.jsx)(I.xcL,{})})]})}),(0,P.jsxs)("div",{children:[(e.sellingPrice*n).toFixed(2),"$"]}),(0,P.jsx)("div",{children:(0,P.jsx)(s.Bhs,{className:"".concat(j),onClick:function(){return k(!0)}})}),(0,P.jsx)(S.Z,{showModal:v,setShowModal:k,title:"Remove product?",children:(0,P.jsxs)("div",{children:[(0,P.jsx)("p",{children:"Do you want to delete the selected product?"}),(0,P.jsxs)("div",{className:q,children:[(0,P.jsx)(d.Z,{variant:"outlined",color:"error",onClick:function(){f(B.U.removeCartItems({ids:[e.id]})),u(a.filter((function(t){return t.book.id!==e.id}))),k(!1)},children:"Delete"}),(0,P.jsx)(d.Z,{variant:"contained",onClick:function(){return k(!1)},children:"Cancel"})]})]})})]})},U=n(7689),M=function(){var t=(0,h.T)(),e=(0,U.s0)(),n=(0,h.C)((function(t){return t.cart})),y=n.items,g=n.totalQuantity,b=(0,o.useState)([]),N=(0,r.Z)(b,2),w=N[0],Z=N[1],Q=(0,o.useState)(0),q=(0,r.Z)(Q,2),A=q[0],I=q[1],L=(0,o.useState)(!1),M=(0,r.Z)(L,2),H=M[0],D=M[1],E=(0,o.useState)(0),F=(0,r.Z)(E,2),G=F[0],K=F[1],O=(0,o.useState)(!1),X=(0,r.Z)(O,2),$=X[0],z=X[1];(0,o.useEffect)((function(){var t=function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var e,n,c,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.Z.get("/books/cart?ids=".concat(y.map((function(t){return t.id})).toString()));case 3:e=t.sent,n=e.data,c=n.map((function(t){var e;return{book:t,quantity:null===(e=y.find((function(e){return e.id===t.id})))||void 0===e?void 0:e.quantity,checked:!1}})),Z(c),console.log("async:",c),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,u.I)(t.t0)&&(console.log(t.t0),l.Am.error(null===(a=t.t0.response)||void 0===a?void 0:a.data.message));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();t()}),[]),(0,o.useEffect)((function(){for(var t=!0,e=0,n=0;n<w.length;n++)w[n].checked?e++:t=!1;return D(t),K(e),I(w.reduce((function(t,e){return console.log(e.quantity),e.checked?t+e.book.sellingPrice*e.quantity:t}),0)),function(){}}),[w]);return(0,P.jsxs)("div",{id:f,children:[0!==w.length?(0,P.jsxs)("div",{id:x,children:[(0,P.jsxs)("div",{id:m,children:[(0,P.jsxs)("div",{className:"".concat(_," ").concat(p," px-0 fw-semibold"),children:[(0,P.jsx)("div",{children:(0,P.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",id:"",checked:H,onChange:function(){D(!H),Z(w.map((function(t){return(0,c.Z)((0,c.Z)({},t),{},{checked:!H})})))}})}),(0,P.jsxs)("div",{children:["Product (",g,")"]}),(0,P.jsx)("div",{children:"Price each"}),(0,P.jsx)("div",{children:"Quantity"}),(0,P.jsx)("div",{children:"Total price"}),(0,P.jsx)("div",{children:(0,P.jsx)(s.Bhs,{className:"".concat(j),onClick:function(){Z(w.filter((function(t){return!t.checked}))),t(B.U.removeCartItems({ids:w.filter((function(t){return t.checked})).map((function(t){return t.book.id}))}))}})})]}),(0,P.jsx)("div",{className:"mt-2",children:w.map((function(t){return(0,P.jsx)(T,{book:t.book,quantity:t.quantity,checked:t.checked,booksInfo:w,setBooksInfo:Z},t.book.id)}))})]}),(0,P.jsx)("div",{id:v,children:(0,P.jsx)("div",{className:"".concat(k),children:(0,P.jsxs)("div",{className:"".concat(p),children:[(0,P.jsxs)("div",{className:"d-flex justify-content-between flex-row",children:[(0,P.jsx)("p",{children:"Total"}),(0,P.jsxs)("h5",{children:[A.toFixed(2),"$"]})]}),(0,P.jsxs)(d.Z,{variant:"contained",className:"".concat(C),onClick:function(){0===G?z(!0):e("/checkout",{state:{items:w.filter((function(t){return t.checked})),totalQuantity:G,totalPrice:A.toFixed(2)}})},children:["Check out (",G,")"]})]})})})]}):(0,P.jsx)("div",{id:x,className:"flex-column align-items-center",children:(0,P.jsxs)("div",{className:"d-flex flex-column align-items-center bg-white pb-4 rounded",style:{width:"100%"},children:[(0,P.jsx)("img",{src:"/images/empty_cart.jpg",alt:"empty",style:{width:"40%"}}),(0,P.jsx)("span",{className:"mb-4 text-muted",children:"Your shopping cart is empty"}),(0,P.jsx)(d.Z,{variant:"contained",onClick:function(){return e("/")},children:"Go shopping now"})]})}),(0,P.jsxs)(S.Z,{title:" ",showModal:$,setShowModal:z,closeBtn:!1,children:[(0,P.jsx)("h5",{children:"You have not selected any items for checkout"}),(0,P.jsx)("div",{className:"float-end mt-4",children:(0,P.jsx)(d.Z,{variant:"contained",onClick:function(){return z(!1)},children:"OK"})})]})]})}}}]);
//# sourceMappingURL=193.04b25349.chunk.js.map